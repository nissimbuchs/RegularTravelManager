# Story 6.1: ELCA Base Styling Foundation

## Status
Approved

## Story
**As a** developer,
**I want** a structured ELCA-compliant styling architecture with separate SCSS files,
**so that** all components can consistently use ELCA branding guidelines and maintain separation between styling and component logic.

## Acceptance Criteria

1. **Base SCSS Architecture**: Create organized SCSS file structure with ELCA variables, mixins, and base styles
2. **ELCA Theme Integration**: Implement ELCA coral-red color system with WCAG 2.1 AA compliance
3. **Angular Material Customization**: Configure Angular Material theme to use ELCA branding guidelines
4. **Component Style Separation**: Refactor existing component CSS files to use SCSS and import base ELCA styles
5. **Build Integration**: Ensure SCSS compilation works with Angular build system
6. **Style Documentation**: Document ELCA styling architecture and usage patterns for developers

## Tasks / Subtasks

- [ ] **Task 1: Create ELCA Base SCSS Architecture** (AC: 1, 2)
  - [ ] Create `src/styles/base/_elca-variables.scss` with ELCA color system
  - [ ] Create `src/styles/base/_elca-mixins.scss` with reusable styling patterns
  - [ ] Create `src/styles/base/_elca-base.scss` with reset and typography
  - [ ] Create `src/styles/themes/_elca-material-theme.scss` for Angular Material customization
  - [ ] Create `src/styles/components/` directory with component-specific SCSS files
  - [ ] Create `src/styles/main.scss` as central import file

- [ ] **Task 2: Implement Angular Material ELCA Theme** (AC: 3)
  - [ ] Configure Angular Material custom theme with ELCA colors
  - [ ] Update component-specific Material overrides for ELCA branding
  - [ ] Implement ELCA button, form, and layout customizations

- [ ] **Task 3: Refactor Existing Component Styles** (AC: 4)
  - [ ] Convert `src/styles.css` to `src/styles.scss` with ELCA imports
  - [ ] Refactor `app.component.css` to use ELCA SCSS architecture
  - [ ] Refactor `travel-request-form.component.css` to SCSS with ELCA styles
  - [ ] Refactor `manager-request-queue.component.css` to SCSS with ELCA styles
  - [ ] Refactor `confirmation-dialog.component.css` to SCSS with ELCA styles

- [ ] **Task 4: Configure Build System Integration** (AC: 5)
  - [ ] Update `angular.json` to handle SCSS compilation
  - [ ] Verify build process works with new SCSS architecture
  - [ ] Test build optimization and bundling with SCSS

- [ ] **Task 5: Create Style Documentation** (AC: 6)
  - [ ] Document ELCA styling architecture in development guide
  - [ ] Create usage examples for developers
  - [ ] Document component styling conventions

- [ ] **Task 6: Testing and Validation** (AC: 1-6)
  - [ ] Verify all existing components render correctly with new styles
  - [ ] Test responsive design with ELCA styling
  - [ ] Validate WCAG 2.1 AA contrast compliance
  - [ ] Test build performance impact

## Infrastructure Impact Assessment ⚠️ REQUIRED

### Frontend Changes
- [x] **New Components/Pages** - No new components, refactoring existing styling architecture
- [x] **State Management** - No RxJS service updates needed
- [x] **Routing** - No new routes required
- [x] **API Integration** - No new HTTP service methods needed

### Backend Changes
- [ ] **New API Endpoints** - No new endpoints required
- [ ] **Lambda Functions** - No new Lambda handlers required
- [ ] **Database Changes** - No schema modifications needed
- [ ] **Authentication** - No auth/authorization changes required

### Infrastructure Changes (AWS CDK)
- [ ] **API Gateway** - No new routes/methods/cors needed
- [ ] **Lambda Configuration** - No function definition changes
- [ ] **Database** - No RDS changes or migrations needed
- [ ] **Environment Variables** - No new config needed
- [ ] **IAM Permissions** - No new service permissions needed
- [ ] **Other AWS Services** - No additional AWS services needed

### Development Environment
- [ ] **Docker Services** - No new services in docker-compose.yml needed
- [ ] **LocalStack** - No new mocked AWS services needed
- [ ] **Sample Data** - No database seed updates needed
- [ ] **Environment Setup** - No new setup steps required

## Dev Notes

### Technical Design Notes

**ELCA Styling Architecture Pattern:**
The implementation follows Angular best practices with SCSS modular architecture. Based on the UX Development Specifications [Source: docs/ux-development-specifications.md#design-system-implementation], the ELCA color system uses coral-red (#e74c3c) as the primary brand color with WCAG 2.1 AA compliant contrast ratios.

**Current State Analysis:**
The existing frontend uses basic CSS files with Angular Material indigo-pink theme and Swiss Professional color palette variables. The styling needs to be refactored to implement the documented ELCA guidelines from the UX specifications.

**SCSS Architecture Structure:**
```
src/styles/
├── base/
│   ├── _elca-variables.scss    # ELCA colors, fonts, spacing
│   ├── _elca-mixins.scss       # Reusable ELCA styling patterns
│   └── _elca-base.scss         # Base styles, resets, typography
├── components/
│   ├── _buttons.scss           # Button styles following ELCA
│   ├── _forms.scss             # Form styles following ELCA
│   └── _cards.scss             # Card styles following ELCA
├── themes/
│   └── _elca-material-theme.scss # Angular Material theme customization
└── main.scss                   # Import everything
```

**Angular Material Integration:**
The Angular Material theme needs to be customized to use ELCA branding. Current `styles.css` imports `@angular/material/prebuilt-themes/indigo-pink.css` which must be replaced with custom ELCA theme configuration.

**Component Refactoring Strategy:**
Each existing `.css` file will be converted to `.scss` and refactored to:
1. Import ELCA base variables and mixins
2. Remove hardcoded colors and replace with ELCA variables
3. Utilize ELCA mixins for common patterns
4. Maintain existing responsive behavior

**File Location References [Source: docs/architecture/05-frontend-architecture.md]:**
- Component styles: `apps/web/src/app/features/[module]/components/[component].scss`
- Global styles: `apps/web/src/styles/`
- Shared styles: `apps/web/src/styles/components/`

**Build System Integration:**
Angular CLI supports SCSS out-of-the-box. The `angular.json` configuration may need updates to ensure proper SCSS compilation and optimization during build process.

### Testing

**Testing Requirements [Source: docs/architecture/07-development-standards.md#testing-strategy]:**

**Frontend Testing Focus:**
- **Component Visual Testing**: Verify all existing components render correctly with new ELCA styling
- **Responsive Testing**: Test responsive design behavior with new SCSS architecture
- **Browser Compatibility**: Test SCSS compilation and styling across target browsers
- **Accessibility Testing**: Validate WCAG 2.1 AA contrast compliance with ELCA color system

**Build Testing:**
- **Development Build**: Verify `npm run dev:web` works with SCSS
- **Production Build**: Verify `npm run build` optimizes SCSS correctly
- **Bundle Analysis**: Ensure SCSS doesn't significantly increase bundle size

**Testing Approach:**
- Manual testing of existing components after style refactoring
- Automated accessibility testing tools for contrast validation
- Build system verification in both development and production modes

**No Unit Tests Required:**
This story focuses on styling architecture refactoring. No new business logic is introduced that requires unit testing.

## Definition of Done Checklist

### Development Complete
- [ ] All acceptance criteria implemented
- [ ] Unit tests written and passing (N/A for styling architecture)
- [ ] Integration tests cover new functionality (N/A for styling only)
- [ ] Code follows project conventions
- [ ] TypeScript types properly defined in packages/shared (N/A for styling)

### Infrastructure Complete ⚠️ CRITICAL
- [ ] All infrastructure changes implemented in CDK (N/A - no infrastructure changes)
- [ ] CDK diff reviewed and approved (N/A)
- [ ] Environment variables configured (N/A)
- [ ] IAM permissions validated (N/A)
- [ ] API Gateway routes deployed and tested (N/A)
- [ ] Lambda functions deployed and tested (N/A)
- [ ] Database migrations applied successfully (N/A)
- [ ] Infrastructure validation passes (N/A)

### Review Ready
- [ ] PR created with infrastructure checklist completed
- [ ] Code review completed
- [ ] Infrastructure review completed (N/A)
- [ ] Documentation updated
- [ ] CLAUDE.md updated if commands changed (N/A)

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-14 | 1.0 | Initial story creation for ELCA base styling foundation | Bob (Scrum Master) |
| 2025-09-14 | 1.1 | Story approved and ready for development | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
*To be populated during implementation*

### Debug Log References
*To be populated during implementation*

### Completion Notes List
*To be populated during implementation*

### File List
*To be populated during implementation*

## QA Results
*Results from QA Agent review will be populated here*